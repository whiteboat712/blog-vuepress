import{u as M,f as Ee,h as se,i as U,j as te,P as ae,t as le,k as re,l as L,m as H,p as Ae,w as Y,q as s,v as oe,R as j,x as Be,y as ue,z as ie,C as ne,A as ce,B as pe,D as ve,E as he,F as ye,G as R,H as de,I as me,J as De,K as I,L as O,M as Ce}from"./app-Bmh-xlIS.js";const ge=["/","/intro.html","/en/","/en/intro.html","/posts/%E7%94%9F%E6%B4%BB/%E5%B0%81%E5%AF%9D%E5%8D%81%E5%A4%A9%E5%B0%8F%E8%AE%B0.html","/posts/%E9%A1%B9%E7%9B%AE/Python%E5%AE%9E%E7%8E%B02048.html","/posts/%E7%AC%94%E8%AE%B0/%E6%8E%A2%E7%B4%A2/C__%E4%B8%AD%E7%9A%84this.html","/posts/%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/Java%E5%AE%9E%E7%8E%B0%E6%A8%A1%E6%8B%9F%E6%A0%88.html","/posts/%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0(%E4%B8%80)%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97.html","/posts/%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0(%E4%BA%8C)%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E6%AF%94%E8%B5%9B/2022-10-22%E6%B2%B3%E5%8C%97%E7%9C%81%E8%B5%9B%E8%B5%9B%E5%90%8E%E5%8F%8D%E6%80%9D.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day1-Flip%20Game.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day10-Currency%20Exchange.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day11-Wormholes.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day12-Balance.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day13-Cash%20Machine.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day14-The%20Cow%20Lexicon.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day15-Alignment.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day16-Code.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day2-The%20Pilots%20Brothers'%20refrigerator.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day3-Radar%20Installation.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day4-Power%20of%20Cryptography.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day5-Y2K%20Accounting%20Bug.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day6-Tautology.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day7-Parencodings.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day8-Crashing%20Robots.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day9-Robot%20Motion.html","/404.html","/posts/%E7%94%9F%E6%B4%BB/","/posts/","/posts/%E9%A1%B9%E7%9B%AE/","/posts/%E7%AC%94%E8%AE%B0/%E6%8E%A2%E7%B4%A2/","/posts/%E7%AC%94%E8%AE%B0/","/posts/%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/","/posts/%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E6%AF%94%E8%B5%9B/","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/","/category/","/category/%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/","/category/%E7%AB%9E%E8%B5%9B/","/category/%E9%A2%98%E5%8D%95/","/en/category/","/tag/","/tag/c__/","/tag/%E7%AE%97%E6%B3%95/","/tag/python/","/tag/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/","/tag/java/","/en/tag/","/article/","/en/article/","/star/","/en/star/","/timeline/","/en/timeline/"],fe="SEARCH_PRO_QUERY_HISTORY",y=M(fe,[]),He=()=>{const{queryHistoryCount:t}=R,a=t>0;return{enabled:a,queryHistory:y,addQueryHistory:l=>{a&&(y.value=Array.from(new Set([l,...y.value.slice(0,t-1)])))},removeQueryHistory:l=>{y.value=[...y.value.slice(0,l),...y.value.slice(l+1)]}}},P=t=>ge[t.id]+("anchor"in t?`#${t.anchor}`:""),Re="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:$}=R,d=M(Re,[]),ke=()=>{const t=$>0;return{enabled:t,resultHistory:d,addResultHistory:a=>{if(t){const l={link:P(a),display:a.display};"header"in a&&(l.header=a.header),d.value=[l,...d.value.slice(0,$-1)]}},removeResultHistory:a=>{d.value=[...d.value.slice(0,a),...d.value.slice(a+1)]}}},we=t=>{const a=ne(),l=U(),k=ce(),A=L(0),C=H(()=>A.value>0),p=pe([]);return ve(()=>{const{search:v,terminate:w}=he(),m=ye(u=>{const D=u.join(" "),{searchFilter:F=c=>c,splitWord:x,suggestionsFilter:b,...h}=a.value;D?(A.value+=1,v(u.join(" "),l.value,h).then(c=>F(c,D,l.value,k.value)).then(c=>{A.value-=1,p.value=c}).catch(c=>{console.warn(c),A.value-=1,A.value||(p.value=[])})):p.value=[]},R.searchDelay-R.suggestDelay);Y([t,l],([u])=>m(u),{immediate:!0}),de(()=>{w()})}),{isSearching:C,results:p}};var xe=Ee({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(t,{emit:a}){const l=se(),k=U(),A=te(ae),{enabled:C,addQueryHistory:p,queryHistory:v,removeQueryHistory:w}=He(),{enabled:m,resultHistory:u,addResultHistory:D,removeResultHistory:F}=ke(),x=C||m,b=le(t,"queries"),{results:h,isSearching:c}=we(b),r=re({isQuery:!0,index:0}),i=L(0),n=L(0),T=H(()=>x&&(v.value.length>0||u.value.length>0)),Q=H(()=>h.value.length>0),q=H(()=>h.value[i.value]||null),G=()=>{const{isQuery:e,index:E}=r;E===0?(r.isQuery=!e,r.index=e?u.value.length-1:v.value.length-1):r.index=E-1},J=()=>{const{isQuery:e,index:E}=r;E===(e?v.value.length-1:u.value.length-1)?(r.isQuery=!e,r.index=0):r.index=E+1},K=()=>{i.value=i.value>0?i.value-1:h.value.length-1,n.value=q.value.contents.length-1},z=()=>{i.value=i.value<h.value.length-1?i.value+1:0,n.value=0},V=()=>{n.value<q.value.contents.length-1?n.value+=1:z()},W=()=>{n.value>0?n.value-=1:K()},S=e=>e.map(E=>Ce(E)?E:s(E[0],E[1])),N=e=>{if(e.type==="customField"){const E=me[e.index]||"$content",[o,f=""]=De(E)?E[k.value].split("$content"):E.split("$content");return e.display.map(B=>s("div",S([o,...B,f])))}return e.display.map(E=>s("div",S(E)))},g=()=>{i.value=0,n.value=0,a("updateQuery",""),a("close")},X=()=>C?s("ul",{class:"search-pro-result-list"},s("li",{class:"search-pro-result-list-item"},[s("div",{class:"search-pro-result-title"},A.value.queryHistory),v.value.map((e,E)=>s("div",{class:["search-pro-result-item",{active:r.isQuery&&r.index===E}],onClick:()=>{a("updateQuery",e)}},[s(I,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},e),s("button",{class:"search-pro-remove-icon",innerHTML:O,onClick:o=>{o.preventDefault(),o.stopPropagation(),w(E)}})]))])):null,Z=()=>m?s("ul",{class:"search-pro-result-list"},s("li",{class:"search-pro-result-list-item"},[s("div",{class:"search-pro-result-title"},A.value.resultHistory),u.value.map((e,E)=>s(j,{to:e.link,class:["search-pro-result-item",{active:!r.isQuery&&r.index===E}],onClick:()=>{g()}},()=>[s(I,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[e.header?s("div",{class:"content-header"},e.header):null,s("div",e.display.map(o=>S(o)).flat())]),s("button",{class:"search-pro-remove-icon",innerHTML:O,onClick:o=>{o.preventDefault(),o.stopPropagation(),F(E)}})]))])):null;return Ae("keydown",e=>{if(t.isFocusing){if(Q.value){if(e.key==="ArrowUp")W();else if(e.key==="ArrowDown")V();else if(e.key==="Enter"){const E=q.value.contents[n.value];p(t.queries.join(" ")),D(E),l.push(P(E)),g()}}else if(m){if(e.key==="ArrowUp")G();else if(e.key==="ArrowDown")J();else if(e.key==="Enter"){const{index:E}=r;r.isQuery?(a("updateQuery",v.value[E]),e.preventDefault()):(l.push(u.value[E].link),g())}}}}),Y([i,n],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>s("div",{class:["search-pro-result-wrapper",{empty:t.queries.length?!Q.value:!T.value}],id:"search-pro-results"},t.queries.length?c.value?s(oe,{hint:A.value.searching}):Q.value?s("ul",{class:"search-pro-result-list"},h.value.map(({title:e,contents:E},o)=>{const f=i.value===o;return s("li",{class:["search-pro-result-list-item",{active:f}]},[s("div",{class:"search-pro-result-title"},e||A.value.defaultTitle),E.map((B,ee)=>{const _=f&&n.value===ee;return s(j,{to:P(B),class:["search-pro-result-item",{active:_,"aria-selected":_}],onClick:()=>{p(t.queries.join(" ")),D(B),g()}},()=>[B.type==="text"?null:s(B.type==="title"?Be:B.type==="heading"?ue:ie,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[B.type==="text"&&B.header?s("div",{class:"content-header"},B.header):null,s("div",N(B))])])})])})):A.value.emptyResult:x?T.value?[X(),Z()]:A.value.emptyHistory:A.value.emptyResult)}});export{xe as default};
