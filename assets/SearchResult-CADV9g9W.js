import{u as M,j as Ee,m as te,p as U,q as se,P as ae,v as le,x as re,l as b,y as H,z as oe,w as Y,k as t,A as Ae,R as O,B as Be,C as ue,D as ie,E as ne,G as ce,H as pe,I as he,J as de,K as ve,L as R,M as ye,N as me,O as ge,Q as j,S as I,T as De}from"./app-D9YzVia9.js";const Ce=["/","/intro.html","/demo/","/demo/disable.html","/demo/layout.html","/demo/markdown.html","/demo/page.html","/en/","/en/intro.html","/en/demo/","/en/demo/disable.html","/en/demo/layout.html","/en/demo/markdown.html","/en/demo/page.html","/posts/%E7%94%9F%E6%B4%BB/%E5%B0%81%E5%AF%9D%E5%8D%81%E5%A4%A9%E5%B0%8F%E8%AE%B0.html","/posts/%E9%A1%B9%E7%9B%AE/Python%E5%AE%9E%E7%8E%B02048.html","/posts/%E7%AC%94%E8%AE%B0/%E6%8E%A2%E7%B4%A2/C__%E4%B8%AD%E7%9A%84this.html","/posts/%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/Java%E5%AE%9E%E7%8E%B0%E6%A8%A1%E6%8B%9F%E6%A0%88.html","/posts/%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0(%E4%B8%80)%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97.html","/posts/%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0(%E4%BA%8C)%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E6%AF%94%E8%B5%9B/2022-10-22%E6%B2%B3%E5%8C%97%E7%9C%81%E8%B5%9B%E8%B5%9B%E5%90%8E%E5%8F%8D%E6%80%9D.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day1-Flip%20Game.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day10-Currency%20Exchange.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day11-Wormholes.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day12-Balance.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day13-Cash%20Machine.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day14-The%20Cow%20Lexicon.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day15-Alignment.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day16-Code.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day2-The%20Pilots%20Brothers'%20refrigerator.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day3-Radar%20Installation.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day4-Power%20of%20Cryptography.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day5-Y2K%20Accounting%20Bug.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day6-Tautology.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day7-Parencodings.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day8-Crashing%20Robots.html","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day9-Robot%20Motion.html","/404.html","/posts/%E7%94%9F%E6%B4%BB/","/posts/","/posts/%E9%A1%B9%E7%9B%AE/","/posts/%E7%AC%94%E8%AE%B0/%E6%8E%A2%E7%B4%A2/","/posts/%E7%AC%94%E8%AE%B0/","/posts/%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/","/posts/%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E6%AF%94%E8%B5%9B/","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/","/posts/%E7%BC%96%E7%A0%81%E8%AE%AD%E7%BB%83/%E8%AE%AD%E7%BB%83/","/category/","/category/%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/","/category/%E6%8C%87%E5%8D%97/","/category/%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/","/category/%E7%AB%9E%E8%B5%9B/","/category/%E9%A2%98%E5%8D%95/","/en/category/","/en/category/guide/","/tag/","/tag/%E7%A6%81%E7%94%A8/","/tag/%E5%8A%A0%E5%AF%86/","/tag/%E5%B8%83%E5%B1%80/","/tag/markdown/","/tag/%E9%A1%B5%E9%9D%A2%E9%85%8D%E7%BD%AE/","/tag/%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/","/tag/c__/","/tag/%E7%AE%97%E6%B3%95/","/tag/python/","/tag/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/","/tag/java/","/en/tag/","/en/tag/disable/","/en/tag/encryption/","/en/tag/layout/","/en/tag/markdown/","/en/tag/page-config/","/en/tag/guide/","/article/","/en/article/","/star/","/en/star/","/timeline/","/en/timeline/"],fe="SEARCH_PRO_QUERY_HISTORY",v=M(fe,[]),He=()=>{const{queryHistoryCount:s}=R,a=s>0;return{enabled:a,queryHistory:v,addQueryHistory:l=>{a&&(v.value=Array.from(new Set([l,...v.value.slice(0,s-1)])))},removeQueryHistory:l=>{v.value=[...v.value.slice(0,l),...v.value.slice(l+1)]}}},L=s=>Ce[s.id]+("anchor"in s?`#${s.anchor}`:""),Re="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:$}=R,y=M(Re,[]),ke=()=>{const s=$>0;return{enabled:s,resultHistory:y,addResultHistory:a=>{if(s){const l={link:L(a),display:a.display};"header"in a&&(l.header=a.header),y.value=[l,...y.value.slice(0,$-1)]}},removeResultHistory:a=>{y.value=[...y.value.slice(0,a),...y.value.slice(a+1)]}}},we=s=>{const a=ne(),l=U(),k=ce(),o=b(0),D=H(()=>o.value>0),p=pe([]);return he(()=>{const{search:h,terminate:w}=de(),m=ve(u=>{const g=u.join(" "),{searchFilter:F=c=>c,splitWord:Q,suggestionsFilter:P,...d}=a.value;g?(o.value+=1,h(u.join(" "),l.value,d).then(c=>F(c,g,l.value,k.value)).then(c=>{o.value-=1,p.value=c}).catch(c=>{console.warn(c),o.value-=1,o.value||(p.value=[])})):p.value=[]},R.searchDelay-R.suggestDelay);Y([s,l],([u])=>m(u),{immediate:!0}),ye(()=>{w()})}),{isSearching:D,results:p}};var Qe=Ee({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(s,{emit:a}){const l=te(),k=U(),o=se(ae),{enabled:D,addQueryHistory:p,queryHistory:h,removeQueryHistory:w}=He(),{enabled:m,resultHistory:u,addResultHistory:g,removeResultHistory:F}=ke(),Q=D||m,P=le(s,"queries"),{results:d,isSearching:c}=we(P),r=re({isQuery:!0,index:0}),i=b(0),n=b(0),T=H(()=>Q&&(h.value.length>0||u.value.length>0)),x=H(()=>d.value.length>0),q=H(()=>d.value[i.value]||null),G=()=>{const{isQuery:e,index:E}=r;E===0?(r.isQuery=!e,r.index=e?u.value.length-1:h.value.length-1):r.index=E-1},J=()=>{const{isQuery:e,index:E}=r;E===(e?h.value.length-1:u.value.length-1)?(r.isQuery=!e,r.index=0):r.index=E+1},K=()=>{i.value=i.value>0?i.value-1:d.value.length-1,n.value=q.value.contents.length-1},z=()=>{i.value=i.value<d.value.length-1?i.value+1:0,n.value=0},N=()=>{n.value<q.value.contents.length-1?n.value+=1:z()},V=()=>{n.value>0?n.value-=1:K()},S=e=>e.map(E=>De(E)?E:t(E[0],E[1])),W=e=>{if(e.type==="customField"){const E=me[e.index]||"$content",[A,f=""]=ge(E)?E[k.value].split("$content"):E.split("$content");return e.display.map(B=>t("div",S([A,...B,f])))}return e.display.map(E=>t("div",S(E)))},C=()=>{i.value=0,n.value=0,a("updateQuery",""),a("close")},X=()=>D?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},o.value.queryHistory),h.value.map((e,E)=>t("div",{class:["search-pro-result-item",{active:r.isQuery&&r.index===E}],onClick:()=>{a("updateQuery",e)}},[t(j,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},e),t("button",{class:"search-pro-remove-icon",innerHTML:I,onClick:A=>{A.preventDefault(),A.stopPropagation(),w(E)}})]))])):null,Z=()=>m?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},o.value.resultHistory),u.value.map((e,E)=>t(O,{to:e.link,class:["search-pro-result-item",{active:!r.isQuery&&r.index===E}],onClick:()=>{C()}},()=>[t(j,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[e.header?t("div",{class:"content-header"},e.header):null,t("div",e.display.map(A=>S(A)).flat())]),t("button",{class:"search-pro-remove-icon",innerHTML:I,onClick:A=>{A.preventDefault(),A.stopPropagation(),F(E)}})]))])):null;return oe("keydown",e=>{if(s.isFocusing){if(x.value){if(e.key==="ArrowUp")V();else if(e.key==="ArrowDown")N();else if(e.key==="Enter"){const E=q.value.contents[n.value];p(s.queries.join(" ")),g(E),l.push(L(E)),C()}}else if(m){if(e.key==="ArrowUp")G();else if(e.key==="ArrowDown")J();else if(e.key==="Enter"){const{index:E}=r;r.isQuery?(a("updateQuery",h.value[E]),e.preventDefault()):(l.push(u.value[E].link),C())}}}}),Y([i,n],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>t("div",{class:["search-pro-result-wrapper",{empty:s.queries.length?!x.value:!T.value}],id:"search-pro-results"},s.queries.length?c.value?t(Ae,{hint:o.value.searching}):x.value?t("ul",{class:"search-pro-result-list"},d.value.map(({title:e,contents:E},A)=>{const f=i.value===A;return t("li",{class:["search-pro-result-list-item",{active:f}]},[t("div",{class:"search-pro-result-title"},e||o.value.defaultTitle),E.map((B,ee)=>{const _=f&&n.value===ee;return t(O,{to:L(B),class:["search-pro-result-item",{active:_,"aria-selected":_}],onClick:()=>{p(s.queries.join(" ")),g(B),C()}},()=>[B.type==="text"?null:t(B.type==="title"?Be:B.type==="heading"?ue:ie,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[B.type==="text"&&B.header?t("div",{class:"content-header"},B.header):null,t("div",W(B))])])})])})):o.value.emptyResult:Q?T.value?[X(),Z()]:o.value.emptyHistory:o.value.emptyResult)}});export{Qe as default};
