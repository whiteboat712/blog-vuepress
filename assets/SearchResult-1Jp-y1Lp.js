import{u as M,f as te,h as se,i as U,j as ae,P as ie,t as ne,k as re,l as L,m as C,p as le,w as Y,q as s,v as oe,R as _,x as ue,y as ce,z as Ee,C as pe,A as de,B as ge,D as he,E as ve,F as ye,G as k,H as Ae,I as me,J as Be,K as I,L as O,M as fe}from"./app-gFnOZgXY.js";const He=["/","/intro.html","/en/","/en/intro.html","/projects/","/posts/life/%E5%B0%81%E5%AF%9D%E5%8D%81%E5%A4%A9%E5%B0%8F%E8%AE%B0.html","/posts/projects/Python%E5%AE%9E%E7%8E%B02048.html","/posts/coding-training/contest/2022-10-22%E6%B2%B3%E5%8C%97%E7%9C%81%E8%B5%9B%E8%B5%9B%E5%90%8E%E5%8F%8D%E6%80%9D.html","/posts/coding-training/training/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day1-Flip%20Game.html","/posts/coding-training/training/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day10-Currency%20Exchange.html","/posts/coding-training/training/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day11-Wormholes.html","/posts/coding-training/training/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day12-Balance.html","/posts/coding-training/training/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day13-Cash%20Machine.html","/posts/coding-training/training/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day14-The%20Cow%20Lexicon.html","/posts/coding-training/training/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day15-Alignment.html","/posts/coding-training/training/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day16-Code.html","/posts/coding-training/training/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day2-The%20Pilots%20Brothers'%20refrigerator.html","/posts/coding-training/training/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day3-Radar%20Installation.html","/posts/coding-training/training/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day4-Power%20of%20Cryptography.html","/posts/coding-training/training/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day5-Y2K%20Accounting%20Bug.html","/posts/coding-training/training/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day6-Tautology.html","/posts/coding-training/training/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day7-Parencodings.html","/posts/coding-training/training/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day8-Crashing%20Robots.html","/posts/coding-training/training/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0day9-Robot%20Motion.html","/posts/notes/algorithm/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0(%E4%B8%80)%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97.html","/posts/notes/algorithm/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0(%E4%BA%8C)%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95.html","/posts/notes/data-structure/Java%E5%AE%9E%E7%8E%B0%E6%A8%A1%E6%8B%9F%E6%A0%88.html","/posts/notes/explore/C__%E4%B8%AD%E7%9A%84this.html","/404.html","/posts/life/","/posts/","/posts/projects/","/posts/coding-training/contest/","/posts/coding-training/","/posts/coding-training/training/","/posts/notes/algorithm/","/posts/notes/","/posts/notes/data-structure/","/posts/notes/explore/","/category/","/category/%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/","/category/%E7%AB%9E%E8%B5%9B/","/category/%E9%A2%98%E5%8D%95/","/en/category/","/tag/","/tag/c__/","/tag/%E7%AE%97%E6%B3%95/","/tag/python/","/tag/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/","/tag/java/","/en/tag/","/article/","/en/article/","/star/","/en/star/","/timeline/","/en/timeline/"],Re="SEARCH_PRO_QUERY_HISTORY",y=M(Re,[]),Ce=()=>{const{queryHistoryCount:a}=k,i=a>0;return{enabled:i,queryHistory:y,addQueryHistory:n=>{i&&(y.value=Array.from(new Set([n,...y.value.slice(0,a-1)])))},removeQueryHistory:n=>{y.value=[...y.value.slice(0,n),...y.value.slice(n+1)]}}},P=a=>He[a.id]+("anchor"in a?`#${a.anchor}`:""),ke="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:$}=k,A=M(ke,[]),we=()=>{const a=$>0;return{enabled:a,resultHistory:A,addResultHistory:i=>{if(a){const n={link:P(i),display:i.display};"header"in i&&(n.header=i.header),A.value=[n,...A.value.slice(0,$-1)]}},removeResultHistory:i=>{A.value=[...A.value.slice(0,i),...A.value.slice(i+1)]}}},xe=a=>{const i=pe(),n=U(),w=de(),l=L(0),f=C(()=>l.value>0),g=ge([]);return he(()=>{const{search:h,terminate:x}=ve(),m=ye(c=>{const B=c.join(" "),{searchFilter:D=d=>d,splitWord:Q,suggestionsFilter:b,...v}=i.value;B?(l.value+=1,h(c.join(" "),n.value,v).then(d=>D(d,B,n.value,w.value)).then(d=>{l.value-=1,g.value=d}).catch(d=>{console.warn(d),l.value-=1,l.value||(g.value=[])})):g.value=[]},k.searchDelay-k.suggestDelay);Y([a,n],([c])=>m(c),{immediate:!0}),Ae(()=>{x()})}),{isSearching:f,results:g}};var Qe=te({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:i}){const n=se(),w=U(),l=ae(ie),{enabled:f,addQueryHistory:g,queryHistory:h,removeQueryHistory:x}=Ce(),{enabled:m,resultHistory:c,addResultHistory:B,removeResultHistory:D}=we(),Q=f||m,b=ne(a,"queries"),{results:v,isSearching:d}=xe(b),r=re({isQuery:!0,index:0}),E=L(0),p=L(0),j=C(()=>Q&&(h.value.length>0||c.value.length>0)),q=C(()=>v.value.length>0),F=C(()=>v.value[E.value]||null),G=()=>{const{isQuery:e,index:t}=r;t===0?(r.isQuery=!e,r.index=e?c.value.length-1:h.value.length-1):r.index=t-1},J=()=>{const{isQuery:e,index:t}=r;t===(e?h.value.length-1:c.value.length-1)?(r.isQuery=!e,r.index=0):r.index=t+1},K=()=>{E.value=E.value>0?E.value-1:v.value.length-1,p.value=F.value.contents.length-1},z=()=>{E.value=E.value<v.value.length-1?E.value+1:0,p.value=0},V=()=>{p.value<F.value.contents.length-1?p.value+=1:z()},W=()=>{p.value>0?p.value-=1:K()},S=e=>e.map(t=>fe(t)?t:s(t[0],t[1])),N=e=>{if(e.type==="customField"){const t=me[e.index]||"$content",[o,R=""]=Be(t)?t[w.value].split("$content"):t.split("$content");return e.display.map(u=>s("div",S([o,...u,R])))}return e.display.map(t=>s("div",S(t)))},H=()=>{E.value=0,p.value=0,i("updateQuery",""),i("close")},X=()=>f?s("ul",{class:"search-pro-result-list"},s("li",{class:"search-pro-result-list-item"},[s("div",{class:"search-pro-result-title"},l.value.queryHistory),h.value.map((e,t)=>s("div",{class:["search-pro-result-item",{active:r.isQuery&&r.index===t}],onClick:()=>{i("updateQuery",e)}},[s(I,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},e),s("button",{class:"search-pro-remove-icon",innerHTML:O,onClick:o=>{o.preventDefault(),o.stopPropagation(),x(t)}})]))])):null,Z=()=>m?s("ul",{class:"search-pro-result-list"},s("li",{class:"search-pro-result-list-item"},[s("div",{class:"search-pro-result-title"},l.value.resultHistory),c.value.map((e,t)=>s(_,{to:e.link,class:["search-pro-result-item",{active:!r.isQuery&&r.index===t}],onClick:()=>{H()}},()=>[s(I,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[e.header?s("div",{class:"content-header"},e.header):null,s("div",e.display.map(o=>S(o)).flat())]),s("button",{class:"search-pro-remove-icon",innerHTML:O,onClick:o=>{o.preventDefault(),o.stopPropagation(),D(t)}})]))])):null;return le("keydown",e=>{if(a.isFocusing){if(q.value){if(e.key==="ArrowUp")W();else if(e.key==="ArrowDown")V();else if(e.key==="Enter"){const t=F.value.contents[p.value];g(a.queries.join(" ")),B(t),n.push(P(t)),H()}}else if(m){if(e.key==="ArrowUp")G();else if(e.key==="ArrowDown")J();else if(e.key==="Enter"){const{index:t}=r;r.isQuery?(i("updateQuery",h.value[t]),e.preventDefault()):(n.push(c.value[t].link),H())}}}}),Y([E,p],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>s("div",{class:["search-pro-result-wrapper",{empty:a.queries.length?!q.value:!j.value}],id:"search-pro-results"},a.queries.length?d.value?s(oe,{hint:l.value.searching}):q.value?s("ul",{class:"search-pro-result-list"},v.value.map(({title:e,contents:t},o)=>{const R=E.value===o;return s("li",{class:["search-pro-result-list-item",{active:R}]},[s("div",{class:"search-pro-result-title"},e||l.value.defaultTitle),t.map((u,ee)=>{const T=R&&p.value===ee;return s(_,{to:P(u),class:["search-pro-result-item",{active:T,"aria-selected":T}],onClick:()=>{g(a.queries.join(" ")),B(u),H()}},()=>[u.type==="text"?null:s(u.type==="title"?ue:u.type==="heading"?ce:Ee,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[u.type==="text"&&u.header?s("div",{class:"content-header"},u.header):null,s("div",N(u))])])})])})):l.value.emptyResult:Q?j.value?[X(),Z()]:l.value.emptyHistory:l.value.emptyResult)}});export{Qe as default};
